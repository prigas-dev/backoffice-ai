{
  "name": "update-task-status",
  "javascriptCode": "function run({ taskId, status }) {\n  // Validate status is one of the allowed values\n  const validStatuses = ['todo', 'in_progress', 'done'];\n  if (!validStatuses.includes(status)) {\n    throw new Error('Invalid status value. Must be one of: todo, in_progress, done');\n  }\n  \n  // Check if task exists\n  const taskExists = query('SELECT id FROM tasks WHERE id = ? AND deleted_at IS NULL', taskId);\n  if (taskExists.length === 0) {\n    throw new Error(`Task with ID ${taskId} not found`);\n  }\n  \n  // Update the task status\n  query(\n    'UPDATE tasks SET status = ?, updated_at = datetime(\"now\") WHERE id = ?', \n    status, \n    taskId\n  );\n  \n  return { success: true };\n}",
  "parameters": {
    "status": {
      "type": "string",
      "spec": {}
    },
    "taskId": {
      "type": "number",
      "spec": {}
    }
  },
  "return": {
    "type": "object",
    "spec": {
      "properties": {
        "success": {
          "type": "boolean",
          "spec": {}
        }
      }
    }
  }
}
